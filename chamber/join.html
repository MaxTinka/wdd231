<!-- Membership Level Section inside your form -->
<fieldset class="membership-levels">
  <legend><span class="legend-number">3</span> Membership Level</legend>
  <div class="membership-options">
    <article class="membership-card" tabindex="0">
      <input
        type="radio"
        id="npMembership"
        name="membershipLevel"
        value="NP Membership"
        checked
        hidden
      />
      <label for="npMembership" class="card-label">
        <h3>NP Membership</h3>
        <p>For non-profit organizations — No fee</p>
        <a href="#" class="open-modal" data-modal="npModal" aria-haspopup="dialog">Learn More</a>
      </label>
    </article>

    <article class="membership-card" tabindex="0">
      <input
        type="radio"
        id="bronzeMembership"
        name="membershipLevel"
        value="Bronze Membership"
        hidden
      />
      <label for="bronzeMembership" class="card-label">
        <h3>Bronze Membership</h3>
        <p>Includes event discounts and webinars — $250/year</p>
        <a href="#" class="open-modal" data-modal="bronzeModal" aria-haspopup="dialog">Learn More</a>
      </label>
    </article>

    <article class="membership-card" tabindex="0">
      <input
        type="radio"
        id="silverMembership"
        name="membershipLevel"
        value="Silver Membership"
        hidden
      />
      <label for="silverMembership" class="card-label">
        <h3>Silver Membership</h3>
        <p>Priority training and bigger discounts — $500/year</p>
        <a href="#" class="open-modal" data-modal="silverModal" aria-haspopup="dialog">Learn More</a>
      </label>
    </article>

    <article class="membership-card" tabindex="0">
      <input
        type="radio"
        id="goldMembership"
        name="membershipLevel"
        value="Gold Membership"
        hidden
      />
      <label for="goldMembership" class="card-label">
        <h3>Gold Membership</h3>
        <p>Spotlight, consultant, max benefits — $1000/year</p>
        <a href="#" class="open-modal" data-modal="goldModal" aria-haspopup="dialog">Learn More</a>
      </label>
    </article>
  </div>
</fieldset>

<!-- Modals for Membership Benefits -->
<div id="npModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="npModalTitle" tabindex="-1" hidden>
  <div class="modal-content">
    <button class="modal-close" aria-label="Close">&times;</button>
    <h2 id="npModalTitle">NP Membership Benefits</h2>
    <ul>
      <li>Free listing in directory</li>
      <li>Member newsletter</li>
    </ul>
  </div>
</div>

<div id="bronzeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="bronzeModalTitle" tabindex="-1" hidden>
  <div class="modal-content">
    <button class="modal-close" aria-label="Close">&times;</button>
    <h2 id="bronzeModalTitle">Bronze Membership Benefits</h2>
    <ul>
      <li>All NP benefits</li>
      <li>10% event discounts</li>
      <li>Training webinars</li>
    </ul>
  </div>
</div>

<div id="silverModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="silverModalTitle" tabindex="-1" hidden>
  <div class="modal-content">
    <button class="modal-close" aria-label="Close">&times;</button>
    <h2 id="silverModalTitle">Silver Membership Benefits</h2>
    <ul>
      <li>All Bronze benefits</li>
      <li>20% event discounts</li>
      <li>Priority training access</li>
    </ul>
  </div>
</div>

<div id="goldModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="goldModalTitle" tabindex="-1" hidden>
  <div class="modal-content">
    <button class="modal-close" aria-label="Close">&times;</button>
    <h2 id="goldModalTitle">Gold Membership Benefits</h2>
    <ul>
      <li>All Silver benefits</li>
      <li>30% event discounts</li>
      <li>Homepage spotlight</li>
      <li>Dedicated consultant</li>
    </ul>
  </div>
</div>

<!-- CSS additions for card styling and animation (add to your join.css) -->
<style>
.membership-options {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
  animation: fadeIn 1.5s ease forwards;
  opacity: 0;
}
.membership-card {
  background: #f0f4f8;
  border: 1px solid #ccc;
  padding: 1rem;
  flex: 1 1 200px;
  max-width: 250px;
  border-radius: 8px;
  cursor: pointer;
  transition: box-shadow 0.3s ease;
}
.membership-card:hover,
.membership-card:focus-within {
  box-shadow: 0 0 10px #2c3e50aa;
  outline: none;
}
.card-label h3 {
  margin-top: 0;
}
@keyframes fadeIn {
  to { opacity: 1; }
}
/* Modal styling */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.modal-content {
  background: #fff;
  padding: 1.5rem 2rem;
  max-width: 400px;
  border-radius: 10px;
  position: relative;
}
.modal-close {
  position: absolute;
  top: 0.5rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: #555;
}
</style>

<!-- JS for modal open/close and basic form validation -->
<script>
  // Modal open/close logic
  const openModalLinks = document.querySelectorAll('.open-modal');
  const modals = document.querySelectorAll('.modal');

  openModalLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const modalId = link.dataset.modal;
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.hidden = false;
        modal.querySelector('.modal-close').focus();
      }
    });
  });

  modals.forEach(modal => {
    const closeBtn = modal.querySelector('.modal-close');

    // Close on button click
    closeBtn.addEventListener('click', () => {
      modal.hidden = true;
    });

    // Close on Escape key
    modal.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        modal.hidden = true;
        const openLink = document.querySelector(`.open-modal[data-modal="${modal.id}"]`);
        if (openLink) openLink.focus();
      }
    });

    // Close on click outside modal-content
    modal.addEventListener('click', e => {
      if (e.target === modal) {
        modal.hidden = true;
      }
    });
  });

  // Basic form validation on submit
  const form = document.getElementById('joinForm');
  form.addEventListener('submit', e => {
    // Clear previous errors
    form.querySelectorAll('.error-message').forEach(span => (span.textContent = ''));

    let valid = true;

    // First Name validation
    const firstName = form.firstName;
    if (!firstName.value.trim()) {
      setError(firstName, 'First name is required');
      valid = false;
    }

    // Last Name validation
    const lastName = form.lastName;
    if (!lastName.value.trim()) {
      setError(lastName, 'Last name is required');
      valid = false;
    }

    // Email validation
    const email = form.email;
    if (!email.value.trim()) {
      setError(email, 'Email is required');
      valid = false;
    } else if (!validateEmail(email.value.trim())) {
      setError(email, 'Please enter a valid email');
      valid = false;
    }

    // Phone validation (digits only, 10-15 digits)
    const phone = form.phone;
    const phonePattern = /^[0-9]{10,15}$/;
    if (!phone.value.trim()) {
      setError(phone, 'Mobile phone is required');
      valid = false;
    } else if (!phonePattern.test(phone.value.trim())) {
      setError(phone, 'Enter a valid phone number (10-15 digits)');
      valid = false;
    }

    // Business Name validation
    const businessName = form.businessName;
    if (!businessName.value.trim()) {
      setError(businessName, 'Business name is required');
      valid = false;
    }

    if (!valid) {
      e.preventDefault();
    }
  });

  function setError(input, message) {
    const errorSpan = input.parentElement.querySelector('.error-message');
    if (errorSpan) {
      errorSpan.textContent = message;
    }
  }

  function validateEmail(email) {
    // Simple regex for basic email validation
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }
</script>
